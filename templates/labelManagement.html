<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>dataMAP - étiquettes</title>
  <link rel="icon" type="image/x-icon" href="{{url_for('static', filename = 'LOGOTYPE_MAP.ico')}}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://public.codepenassets.com/css/normalize-5.0.0.min.css">
  <link rel='stylesheet' href='//ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css'>
  <link rel="stylesheet" href="{{url_for('static', filename = 'labelManagement.css')}}">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" />

  <script>
    var labels = {{ labels | tojson | safe }}; // not a true error, just Flask code not recognized by VS Code
  </script>


</head>
<body>
<section style="padding: 10px;">

  <h1>Gérer les étiquettes</h1>

  <button id="addLabelBtn" class="btn btn-primary">Ajouter une étiquette</button>
  <button id="addTitleBtn" class="btn btn-primary">Ajouter un titre</button>

  <ul id="dragRoot">

    <li id="uncategorized-labels"><i class="icon-building" ></i> <span class="node-facility non-editable">Etiquettes non classées</span></li>

    <li id="categorized-labels"><i class="icon-building"></i> <span class="node-facility non-editable">Etiquettes classées</span>
      
    </li>
  </ul>

</section>

<section>
  <!-- Configuration Modal -->
  <div class="modal fade" id="labelConfigModal" tabindex="-1" role="dialog" data-backdrop="static" aria-labelledby="labelConfigModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <form id="labelConfigForm">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
            <h4 class="modal-title" id="labelConfigModalLabel">Configurer l'étiquette</h4>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label for="labelName">Nom de l'étiquette</label>
              <input type="text" class="form-control" id="labelName" name="labelName" required>
            </div>
            <div class="form-group">
              <label for="labelColor">Couleur</label>
              <input type="color" class="form-control" id="labelColor" name="labelColor">
            </div>
            <div class="form-group">
              <label for="labelAttachedDataframes">Bases de données associées</label>
                <div id="labelAttachedDataframes" style="max-height: 180px; overflow-y: auto;">
                {% for dataframe in dataframes %}
                  <div class="checkbox">
                  <label>
                    <input type="checkbox" name="labelAttachedDataframes[]" value="{{ dataframe }}">
                    {{ dataframe }}
                  </label>
                  </div>
                {% endfor %}
                </div>
            </div>
          </div>
          <div class="modal-footer">
            <div class="pull-left">
              <button type="button" id="deleteLabel" class="btn btn-danger">Supprimer l'étiquette</button>
            </div>
            <button type="button" class="btn btn-default" data-dismiss="modal">Annuler</button>
            <button type="button" id="duplicateLabel" class="btn btn-default">Dupliquer l'étiquette</button>
            <button type="submit" class="btn btn-primary">Enregistrer</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>


<!-- Modal d'attribution des étiquettes -->

<section>
  <div class="modal fade" id="labelAttributionModal" tabindex="-1" role="dialog" data-backdrop="static" aria-labelledby="labelAttributionModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <form id="labelAttributionForm">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
            <h4 class="modal-title" id="labelAttributionModalLabel">Attribuer les étiquettes</h4>
          </div>
          <div class="modal-body">
            <div class="row">
              {% for dataframe in dataframes %}
                <div class="col-md-{{ 12 // dataframes|length }}">
                  <div class="form-group">
                    <label>{{ dataframe }}</label>
                    <div style="max-height: 250px; overflow-y: auto;">
                        {% set all_labels = (labels["classifiées"].keys() | list + labels["non_classifiées"].keys() | list) | unique %}
                        {% for label in all_labels %}
                        <div class="checkbox">
                          <label>
                            <input type="checkbox" name="attribution_{{ dataframe }}[]" value="{{ label }}">
                            {{ label }}
                          </label>
                        </div>
                      {% endfor %}
                    </div>
                  </div>
                </div>
              {% endfor %}
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Annuler</button>
            <button type="submit" class="btn btn-primary">Enregistrer</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>

<button id="saveLabelBtn">Enregistrer</button>
<button id="labelAttributionButton">Attribuer les étiquettes</button>

<a href="{{ url_for('index') }}"><button>Retour à l'index</button></a>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script src="{{url_for('static', filename = 'labelManagement.js')}}"></script>

</body>
</html>












